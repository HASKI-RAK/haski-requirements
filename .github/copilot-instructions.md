# HASKI Requirements & Traceability System

This repository implements an automated requirements management and traceability system following ISO/IEC/IEEE standards for the HASKI (AI-supported adaptive learning) project.

## Architecture Overview

### Single Source of Truth (SSOT) Structure
- **requirements/**: Individual requirement files with YAML front matter
- **srs/SRS.md**: Master Software Requirements Specification document
- **strs/StRS.md**: Stakeholder Requirements Specification
- **traceability/RTM.csv**: Generated requirements-to-tests traceability matrix
- **docs/**: **Ephemeral** - completely regenerated on each build, never edit manually

### Key Data Flow
1. Requirements authored in `requirements/` with structured YAML metadata
2. Tests reference requirements via HASKI-REQ-#### pattern in test names
3. `traceability/build.py` parses test reports and generates RTM.csv
4. `scripts/generate_docs.py` builds complete MkDocs site from SSOT
5. GitHub Actions deploys to GitHub Pages

## Essential Commands

### Local Development
```bash
# Install dependencies
pip install -r requirements.txt

# Generate traceability matrix (with debug output)
python traceability/build.py --debug

# Rebuild complete docs tree
python scripts/generate_docs.py --verbose

# Local preview
mkdocs serve --dev-addr 127.0.0.1:8001
```

### Debugging Traceability
```bash
# Check GitHub file link mappings
python scripts/generate_docs.py --print-mappings

# Verify test parsing
python traceability/build.py --debug --config traceability/config.yaml
```

## Requirements Management Patterns

### Requirement File Structure (requirements/HASKI-REQ-0001.md example)
```yaml
---
id: HASKI-REQ-0001
title: Brief requirement name
type: Functional | Interface | NFR:Performance | NFR:Security
status: Proposed | Approved | Implemented | Verified
stakeholder_priority: High | Medium | Low
verification_method: Test | Review | Analysis | Demonstration
links:
  stories: ["GH-123"]
  tests: [backend::tc_eval_001, fe:cypress::t_login_01]
  parents: [HASKI-STRS-0003]
---

## Beschreibung
The software **shall** [precise, measurable description].
```

### Test Linking Convention
Tests must include requirement IDs in names: `test('[HASKI-REQ-0005] stores config correctly')`

## Multi-Repository Integration

### Adding New Test Sources
1. Configure test reports in `traceability/config.yaml`:
```yaml
test_reports:
  - type: jest
    path: ../frontend/reports/jest-results.json

github_file_link_mappings:
  - local_root: ../frontend/src
    repo: HASKI-RAK/HASKI-Frontend
    branch: main
```

2. CI workflow pattern - checkout external repos, run tests, generate reports
3. Adapters in `traceability/adapters/` parse different test formats

### Supported Test Formats
- **Jest**: `--json --testLocationInResults` output
- Extensible via adapter pattern in `traceability/adapters/`

## Critical Constraints

### Never Edit `docs/` Manually
The entire `docs/` tree is regenerated by `scripts/generate_docs.py`. All manual edits will be lost.

### YAML Front Matter Requirements
- All requirement files must have valid YAML front matter with `id` field
- The `id` field drives all traceability and linking

### Multi-Source Test File Support
RTM supports complex test source specifications:
- `"a.py:10; b.py:20"` (preferred inline format)
- JSON/YAML lists: `["a.py:10", "b.py:20"]`
- Parallel lists in separate columns

## Standards Compliance

Follows ISO/IEC/IEEE standards:
- **29148**: Requirements specification structure
- **29119-3**: Test specifications and coverage
- **15289**: Information item classification

See `governance/` for detailed compliance documentation and tailoring decisions.

## Live Documentation

Generated site: https://haski-rak.github.io/haski-requirements/
- Filterable traceability matrix with GitHub file links
- Requirements browser with cross-references
- Automated status badges and coverage reports